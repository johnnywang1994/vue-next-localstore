!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueLocalStore={},e.Vue)}(this,(function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,r,a="function"==typeof Symbol&&"symbol"===n(Symbol.toStringTag),c=(o="localStore",a?Symbol("[vue-next-localstore]: "+o):"[vue-next-localstore]: "+o),i="undefined"!=typeof window?window.localStorage:Object.create(null);function u(e,t,n){Object.defineProperty(e,t,n)}function f(e,t){!function(e,t){var n=t.options,o=t.currentStore,r=n.versionName,a=n.versionNameKey,c=n.eventDataKey;if(r===i[a])try{o.__data__[c]=JSON.parse(i[c])}catch(e){console.warn('[vue-local-store] "'.concat(c,'" was not defined, use fallback empty object')),o.__data__[c]=Object.create(null)}t.setRoot(a,r),t.syncRootData(),t.refreshEventData()}(0,t),u(e.config.globalProperties,"$localStore",{get:function(){return t}}),e.provide(c,t),r=t}e.createLocalStore=function(e){e.prefix=e.prefix||"",e.uid=e.uid||"anonymous",e.versionNameKey=e.versionNameKey||"version_name",e.eventDataKey=e.eventDataKey||"event_data";var n,o,r,a=t.reactive((n={},o=e.eventDataKey,r={},o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)),c={__data__:a};function l(t,n){var o=e.versionNameKey;if(t===o&&c.__version_name_locked__)console.warn('[vue-local-store] key "'.concat(o,'" cannot be modified'));else{if("string"==typeof n)i[t]=n;else try{i[t]=JSON.stringify(n)}catch(e){return void console.warn('[vue-local-store] root key "'.concat(t,'" failed to set'))}a[t]=n,t===o&&Object.defineProperty(c,"__version_name_locked__",{get:function(){return!0}})}}function s(){var t=e.eventDataKey;l(t,a[t]||Object.create(null))}function y(t){var n=e.uid,o=e.prefix;return"".concat(o).concat(n,"_").concat(t)}var v=t.computed((function(){return a})),d={currentStore:c,setRoot:l,getRoot:function(e){return a[e]},removeRoot:function(e){a[e]=null,delete i[e],delete a[e]},syncRootData:function(){var t=Object.keys(i),n=e.eventDataKey;t.forEach((function(e){var t;if(e!==n)try{t=JSON.parse(i[e])}catch(n){t=i[e]}finally{a[e]=t}}))},set:function(t,n){var o=e.eventDataKey,r=y(t);a[o][r]=n,s()},get:function(t){var n=e.eventDataKey,o=y(t);return a[n][o]},remove:function(t){var n=e.eventDataKey,o=y(t);a[n][o]=null,delete a[n][o],s()},refreshEventData:s,setUid:function(t){t&&(e.uid=t)},install:function(e){f(e,this)}};return u(d,"versionName",{get:function(){return e.versionName}}),u(d,"options",{get:function(){return e}}),u(d,"data",{get:function(){return t.unref(v)}}),u(d,"__version__",{get:function(){return"v0.0.1"}}),d},e.useLocalStore=function(){return t.getCurrentInstance()&&t.inject(c)||r},Object.defineProperty(e,"__esModule",{value:!0})}));